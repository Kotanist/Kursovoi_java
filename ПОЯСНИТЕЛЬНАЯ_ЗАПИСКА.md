# ПОЯСНИТЕЛЬНАЯ ЗАПИСКА

## К курсовому проекту по дисциплине "Программирование на Java"

### Тема: Информационная система "Книжный магазин"

---

## СОДЕРЖАНИЕ

1. [Введение](#1-введение)
2. [Анализ предметной области](#2-анализ-предметной-области)
3. [Описание функциональных требований](#3-описание-функциональных-требований)
4. [Проектирование системы](#4-проектирование-системы)
5. [Реализация системы](#5-реализация-системы)
6. [Тестирование](#6-тестирование)
7. [Безопасность](#7-безопасность)
8. [Инструкция по развертыванию](#8-инструкция-по-развертыванию)
9. [Заключение](#9-заключение)
10. [Список использованных источников](#10-список-использованных-источников)

---

## 1. ВВЕДЕНИЕ

### 1.1. Актуальность проекта

В современном мире автоматизация бизнес-процессов является ключевым фактором успеха любого предприятия. Книжные магазины не являются исключением и требуют эффективных инструментов для управления товарными запасами, клиентской базой, персоналом и заказами.

Данный курсовой проект представляет собой разработку информационной системы для управления книжным магазином на базе платформы Java EE. Система предоставляет полный набор инструментов для учета книг, покупателей, продавцов и обработки заказов.

### 1.2. Цели и задачи проекта

**Цель:** Разработать веб-приложение на базе Java EE для автоматизации процессов книжного магазина с системой аутентификации и разграничением прав доступа.

**Задачи:**

1. Спроектировать базу данных для хранения информации о книгах, покупателях, продавцах и заказах
2. Реализовать серверную часть приложения на Java EE с использованием архитектуры MVC
3. Разработать пользовательский интерфейс с использованием JSP/JSTL
4. Реализовать CRUD операции для всех сущностей
5. Внедрить систему аутентификации и авторизации пользователей
6. Разработать модульные и интеграционные тесты
7. Обеспечить безопасность на уровне веб-запросов и методов
8. Задокументировать код и подготовить инструкции по развертыванию

### 1.3. Используемые технологии

- **Язык программирования:** Java 17
- **Платформа:** Jakarta EE (Servlet API 5.0)
- **ORM Framework:** Hibernate 6.5.2
- **База данных:** PostgreSQL 12+
- **Тестовая БД:** H2 Database
- **Шаблонизатор:** JSP/JSTL 3.0
- **Система сборки:** Apache Maven 3.9+
- **Веб-сервер:** Jetty 11 (разработка)
- **Тестирование:** JUnit 5, Mockito
- **Безопасность:** BCrypt для хеширования паролей

---

## 2. АНАЛИЗ ПРЕДМЕТНОЙ ОБЛАСТИ

### 2.1. Описание предметной области

Книжный магазин представляет собой торговое предприятие, специализирующееся на продаже книг. Основные бизнес-процессы включают:

1. **Управление ассортиментом** - учет книг в наличии с информацией об авторах, издательствах, сериях и ценах
2. **Работа с клиентами** - ведение базы покупателей с контактной информацией
3. **Управление персоналом** - учет продавцов с информацией о должностях и датах трудоустройства
4. **Обработка заказов** - оформление продаж с привязкой к конкретной книге, покупателю и продавцу

### 2.2. Основные сущности системы

#### 2.2.1. Книга (Book)

Содержит информацию о книгах, доступных для продажи:

- Название
- Автор
- Издательство
- Серия
- Год издания
- Цена

#### 2.2.2. Покупатель (Customer)

Информация о клиентах магазина:

- Имя и фамилия
- Электронная почта
- Номер телефона

#### 2.2.3. Продавец (Sale)

Данные о сотрудниках магазина:

- Имя и фамилия
- Должность
- Дата трудоустройства
- Дата рождения
- Электронная почта

#### 2.2.4. Заказ (Order)

Информация о продажах:

- Ссылка на книгу
- Ссылка на покупателя
- Ссылка на продавца
- Дата оформления
- Дата выдачи
- Количество экземпляров
- Общая сумма

#### 2.2.5. Пользователь (User)

Учетные записи для доступа к системе:

- Имя пользователя
- Электронная почта
- Хешированный пароль
- Роль (ADMIN/USER)
- Статус активности

### 2.3. Связи между сущностями

- **Заказ ↔ Книга:** Многие к одному (Many-to-One)
- **Заказ ↔ Покупатель:** Многие к одному (Many-to-One)
- **Заказ ↔ Продавец:** Многие к одному (Many-to-One)

Эти связи обеспечивают целостность данных и позволяют эффективно обрабатывать заказы с полной информацией о товаре, клиенте и сотруднике.

---

## 3. ОПИСАНИЕ ФУНКЦИОНАЛЬНЫХ ТРЕБОВАНИЙ

### 3.1. Требования к функциональности

#### 3.1.1. Система аутентификации

- Регистрация новых пользователей
- Вход в систему с валидацией учетных данных
- Выход из системы
- Управление сессиями пользователей
- Хеширование паролей с использованием BCrypt

#### 3.1.2. Разграничение прав доступа

**Администратор (ADMIN):**

- Полный доступ к управлению книгами (CRUD)
- Полный доступ к базе покупателей (CRUD)
- Полный доступ к базе продавцов (CRUD)
- Полный доступ к управлению заказами (CRUD)

**Обычный пользователь (USER):**

- Просмотр каталога книг (только чтение)
- Нет доступа к остальным модулям

#### 3.1.3. Управление книгами

- Просмотр каталога всех книг
- Добавление новой книги (только ADMIN)
- Редактирование информации о книге (только ADMIN)
- Удаление книги (только ADMIN)

#### 3.1.4. Управление покупателями (только ADMIN)

- Просмотр списка всех покупателей
- Добавление нового покупателя
- Редактирование данных покупателя
- Удаление покупателя

#### 3.1.5. Управление продавцами (только ADMIN)

- Просмотр списка всех продавцов
- Добавление нового продавца
- Редактирование информации о продавце
- Удаление продавца

#### 3.1.6. Управление заказами (только ADMIN)

- Просмотр всех заказов
- Создание нового заказа
- Редактирование заказа
- Удаление заказа
- Автоматический расчет общей суммы заказа

### 3.2. Нефункциональные требования

#### 3.2.1. Производительность

- Время отклика системы не более 3 секунд
- Поддержка одновременной работы нескольких пользователей

#### 3.2.2. Безопасность

- Защита от SQL-инъекций через использование Hibernate
- Хеширование паролей с использованием BCrypt (12 rounds)
- Защита от несанкционированного доступа через фильтры
- Проверка прав доступа на уровне контроллеров

#### 3.2.3. Удобство использования

- Интуитивный пользовательский интерфейс
- Понятная навигация между разделами
- Валидация форм ввода
- Информативные сообщения об ошибках

#### 3.2.4. Надежность

- Обработка ошибок на всех уровнях приложения
- Корректная работа с транзакциями
- Сохранение целостности данных

---

## 4. ПРОЕКТИРОВАНИЕ СИСТЕМЫ

### 4.1. Архитектура системы

Приложение реализовано по архитектурному паттерну **MVC (Model-View-Controller)**:

```
┌─────────────────────────────────────────────┐
│              PRESENTATION LAYER              │
│  ┌──────────────────────────────────────┐   │
│  │      JSP/JSTL Views (index.jsp,      │   │
│  │    books/list.jsp, auth/login.jsp)   │   │
│  └──────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────┐
│               FILTER LAYER                   │
│  ┌──────────────────────────────────────┐   │
│  │   AuthenticationFilter                │   │
│  │   CharacterEncodingFilter             │   │
│  └──────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────┐
│             CONTROLLER LAYER                 │
│  ┌──────────────────────────────────────┐   │
│  │   BookServlet  CustomerServlet       │   │
│  │   SaleServlet  OrderServlet          │   │
│  │   AuthServlet                        │   │
│  └──────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────┐
│              SERVICE LAYER                   │
│  ┌──────────────────────────────────────┐   │
│  │   BookService   CustomerService      │   │
│  │   SaleService   OrderService         │   │
│  │   UserService                        │   │
│  └──────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────┐
│             REPOSITORY LAYER                 │
│  ┌──────────────────────────────────────┐   │
│  │   BookRepository                     │   │
│  │   CustomerRepository                 │   │
│  │   SaleRepository                     │   │
│  │   OrderRepository                    │   │
│  │   UserRepository                     │   │
│  └──────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────┐
│           PERSISTENCE LAYER                  │
│  ┌──────────────────────────────────────┐   │
│  │   Hibernate + JPA                    │   │
│  └──────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────┐
│              DATA LAYER                      │
│  ┌──────────────────────────────────────┐   │
│  │   PostgreSQL Database                │   │
│  │   (bookstore_utf8)                   │   │
│  └──────────────────────────────────────┘   │
└─────────────────────────────────────────────┘
```

### 4.2. Структура базы данных

#### 4.2.1. ER-диаграмма

```
┌─────────────────┐
│      book       │
├─────────────────┤
│ id (PK)         │
│ title           │
│ author          │
│ publishing      │
│ seriya          │
│ year            │
│ price           │
└─────────────────┘
         ▲
         │ Many-to-One
         │
┌─────────────────┐     ┌─────────────────┐
│   customer      │     │      sale       │
├─────────────────┤     ├─────────────────┤
│ id (PK)         │     │ id (PK)         │
│ first_name      │     │ first_name      │
│ last_name       │     │ last_name       │
│ email           │     │ position        │
│ phone           │     │ employment_date │
└─────────────────┘     │ date_birth      │
         ▲              │ email           │
         │              └─────────────────┘
         │                       ▲
         │ Many-to-One           │ Many-to-One
         │                       │
         └──────┬────────────────┘
                │
        ┌───────────────┐
        │    orders     │
        ├───────────────┤
        │ id (PK)       │
        │ id_book (FK)  │
        │ id_customer(FK)│
        │ id_sale (FK)  │
        │ date_input    │
        │ date_output   │
        │ quantity      │
        │ total_sum     │
        └───────────────┘

┌─────────────────┐
│    app_user     │
├─────────────────┤
│ id (PK)         │
│ username        │
│ email           │
│ password        │
│ role            │
│ is_active       │
│ created_at      │
└─────────────────┘
```

#### 4.2.2. SQL схема базы данных

```sql
-- Создание базы данных
CREATE DATABASE bookstore_utf8 
    WITH OWNER = postgres 
    ENCODING = 'UTF8';

-- Таблица книг
CREATE TABLE book (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    author VARCHAR(255) NOT NULL,
    publishing VARCHAR(255),
    seriya VARCHAR(255),
    year INTEGER,
    price NUMERIC(10, 2) NOT NULL
);

-- Таблица покупателей
CREATE TABLE customer (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    phone VARCHAR(50) NOT NULL
);

-- Таблица продавцов
CREATE TABLE sale (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    position VARCHAR(100) NOT NULL,
    employment_date DATE,
    date_birth DATE,
    email VARCHAR(255) NOT NULL UNIQUE
);

-- Таблица заказов
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    id_book INTEGER NOT NULL REFERENCES book(id) ON DELETE CASCADE,
    id_customer INTEGER NOT NULL REFERENCES customer(id) ON DELETE CASCADE,
    id_sale INTEGER NOT NULL REFERENCES sale(id) ON DELETE CASCADE,
    date_input DATE NOT NULL,
    date_output DATE,
    quantity INTEGER NOT NULL,
    total_sum NUMERIC(10, 2) NOT NULL
);

-- Таблица пользователей
CREATE TABLE app_user (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    role VARCHAR(20) NOT NULL DEFAULT 'USER',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN NOT NULL DEFAULT TRUE
);
```

### 4.3. Диаграмма классов (основные entity)

```
┌────────────────────┐
│       Book         │
├────────────────────┤
│ - id: Long         │
│ - title: String    │
│ - author: String   │
│ - publishing: String│
│ - seriya: String   │
│ - year: Integer    │
│ - price: BigDecimal│
├────────────────────┤
│ + getters/setters  │
└────────────────────┘

┌────────────────────┐
│     Customer       │
├────────────────────┤
│ - id: Long         │
│ - firstName: String│
│ - lastName: String │
│ - email: String    │
│ - phone: String    │
├────────────────────┤
│ + getters/setters  │
└────────────────────┘

┌────────────────────┐
│       Sale         │
├────────────────────┤
│ - id: Long         │
│ - firstName: String│
│ - lastName: String │
│ - position: String │
│ - employmentDate: LocalDate│
│ - dateBirth: LocalDate│
│ - email: String    │
├────────────────────┤
│ + getters/setters  │
└────────────────────┘

┌────────────────────┐
│      Order         │
├────────────────────┤
│ - id: Long         │
│ - book: Book       │
│ - customer: Customer│
│ - sale: Sale       │
│ - dateInput: LocalDate│
│ - dateOutput: LocalDate│
│ - quantity: Integer│
│ - totalSum: BigDecimal│
├────────────────────┤
│ + getters/setters  │
└────────────────────┘

┌────────────────────┐
│       User         │
├────────────────────┤
│ - id: Long         │
│ - username: String │
│ - email: String    │
│ - password: String │
│ - role: Role       │
│ - isActive: boolean│
│ - createdAt: LocalDateTime│
├────────────────────┤
│ + isAdmin(): boolean│
│ + getters/setters  │
└────────────────────┘
```

---

## 5. РЕАЛИЗАЦИЯ СИСТЕМЫ

### 5.1. Структура проекта

```
books_java/
├── src/
│   ├── main/
│   │   ├── java/com/bookstore/
│   │   │   ├── model/              # JPA Entity классы
│   │   │   │   ├── Book.java
│   │   │   │   ├── Customer.java
│   │   │   │   ├── Sale.java
│   │   │   │   ├── Order.java
│   │   │   │   └── User.java
│   │   │   ├── repository/         # DAO слой
│   │   │   │   ├── BookRepository.java
│   │   │   │   ├── CustomerRepository.java
│   │   │   │   ├── SaleRepository.java
│   │   │   │   ├── OrderRepository.java
│   │   │   │   └── UserRepository.java
│   │   │   ├── service/            # Бизнес-логика
│   │   │   │   ├── BookService.java
│   │   │   │   ├── CustomerService.java
│   │   │   │   ├── SaleService.java
│   │   │   │   ├── OrderService.java
│   │   │   │   └── UserService.java
│   │   │   ├── controller/         # Сервлеты
│   │   │   │   ├── BookServlet.java
│   │   │   │   ├── CustomerServlet.java
│   │   │   │   ├── SaleServlet.java
│   │   │   │   ├── OrderServlet.java
│   │   │   │   └── AuthServlet.java
│   │   │   ├── filter/             # Фильтры безопасности
│   │   │   │   ├── AuthenticationFilter.java
│   │   │   │   └── CharacterEncodingFilter.java
│   │   │   └── util/
│   │   │       └── EMF.java        # EntityManagerFactory
│   │   ├── resources/
│   │   │   └── META-INF/
│   │   │       └── persistence.xml
│   │   └── webapp/
│   │       ├── WEB-INF/
│   │       │   ├── views/
│   │       │   │   ├── auth/
│   │       │   │   │   ├── login.jsp
│   │       │   │   │   └── register.jsp
│   │       │   │   ├── books/
│   │       │   │   │   ├── list.jsp
│   │       │   │   │   └── form.jsp
│   │       │   │   ├── customers/
│   │       │   │   │   ├── list.jsp
│   │       │   │   │   └── form.jsp
│   │       │   │   ├── sales/
│   │       │   │   │   ├── list.jsp
│   │       │   │   │   └── form.jsp
│   │       │   │   └── orders/
│   │       │   │       ├── list.jsp
│   │       │   │       └── form.jsp
│   │       │   └── web.xml
│   │       └── index.jsp
│   └── test/
│       └── java/com/bookstore/
│           ├── service/
│           │   ├── BookServiceTest.java
│           │   ├── CustomerServiceTest.java
│           │   └── SaleServiceTest.java
│           ├── controller/
│           │   └── BookServletIntegrationTest.java
│           └── repository/
│               └── BookRepositoryIntegrationTest.java
├── database.sql
├── pom.xml
└── README.md
```

### 5.2. Ключевые компоненты

#### 5.2.1. Model (Модели данных)

Все модели являются JPA Entity с аннотациями Hibernate:

```java
@Entity
@Table(name = "book")
public class Book {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
  
    @Column(nullable = false)
    private String title;
  
    // ... остальные поля
}
```

#### 5.2.2. Repository (Слой доступа к данным)

Репозитории используют EntityManager для работы с БД:

```java
public class BookRepository {
    public List<Book> findAll() {
        EntityManager em = EMF.getEntityManager();
        try {
            TypedQuery<Book> query = em.createQuery(
                "SELECT b FROM Book b ORDER BY b.id", Book.class);
            return query.getResultList();
        } finally {
            em.close();
        }
    }
}
```

#### 5.2.3. Service (Бизнес-логика)

Сервисы содержат логику обработки данных:

```java
public class BookService {
    private BookRepository bookRepository;
  
    public List<Book> getAllBooks() {
        return bookRepository.findAll();
    }
  
    public void saveBook(Book book) {
        bookRepository.save(book);
    }
}
```

#### 5.2.4. Controller (Сервлеты)

Сервлеты обрабатывают HTTP-запросы:

```java
@WebServlet("/books")
public class BookServlet extends HttpServlet {
    private BookService bookService;
  
    protected void doGet(HttpServletRequest request, 
                        HttpServletResponse response) {
        String action = request.getParameter("action");
        switch (action) {
            case "list":
                listBooks(request, response);
                break;
            // ... другие действия
        }
    }
}
```

#### 5.2.5. Filter (Фильтры безопасности)

Фильтры проверяют аутентификацию и права:

```java
@WebFilter("/*")
public class AuthenticationFilter implements Filter {
    public void doFilter(ServletRequest request, 
                        ServletResponse response, 
                        FilterChain chain) {
        HttpSession session = ((HttpServletRequest) request).getSession(false);
        User currentUser = (User) session.getAttribute("currentUser");
    
        if (currentUser == null) {
            // Перенаправление на страницу входа
        }
    
        chain.doFilter(request, response);
    }
}
```

### 5.3. Особенности реализации

#### 5.3.1. Система аутентификации

**UserService:**

- Регистрация пользователей с хешированием паролей
- Аутентификация с проверкой пароля
- Управление пользователями

**AuthServlet:**

- Обработка входа и регистрации
- Управление сессиями
- Выход из системы

#### 5.3.2. Разграничение прав

**AuthenticationFilter:**

- Проверка аутентификации для всех запросов
- Проверка прав доступа к административным функциям
- Перенаправление неавторизованных пользователей

**Проверка в сервлетах:**

```java
private boolean isAdmin(HttpServletRequest request) {
    HttpSession session = request.getSession(false);
    if (session != null) {
        User.Role userRole = (User.Role) session.getAttribute("userRole");
        return userRole == User.Role.ADMIN;
    }
    return false;
}
```

#### 5.3.3. Обработка кодировки UTF-8

**CharacterEncodingFilter:**

```java
request.setCharacterEncoding("UTF-8");
response.setCharacterEncoding("UTF-8");
response.setContentType("text/html;charset=UTF-8");
```

---

## 6. ТЕСТИРОВАНИЕ

### 6.1. Стратегия тестирования

Для обеспечения качества кода реализованы:

1. **Модульные тесты** (Unit Tests) - тестирование отдельных компонентов
2. **Интеграционные тесты** (Integration Tests) - тестирование взаимодействия компонентов

### 6.2. Модульные тесты

#### 6.2.1. BookServiceTest

Тестирует бизнес-логику работы с книгами:

```java
@Test
void testGetAllBooks() {
    // Arrange
    Book book1 = new Book("Война и мир", "Лев Толстой", ...);
    Book book2 = new Book("1984", "Джордж Оруэлл", ...);
    when(bookRepository.findAll()).thenReturn(Arrays.asList(book1, book2));
  
    // Act
    List<Book> result = bookService.getAllBooks();
  
    // Assert
    assertEquals(2, result.size());
    verify(bookRepository, times(1)).findAll();
}
```

#### 6.2.2. CustomerServiceTest

Тестирует операции с покупателями

#### 6.2.3. SaleServiceTest

Тестирует операции с продавцами

### 6.3. Интеграционные тесты

#### 6.3.1. BookServletIntegrationTest

Тестирует обработку HTTP-запросов сервлетом

#### 6.3.2. BookRepositoryIntegrationTest

Тестирует взаимодействие с базой данных

### 6.4. Покрытие тестами

Реализовано тестирование:

- ✅ Всех сервисов (BookService, CustomerService, SaleService)
- ✅ Основных операций CRUD
- ✅ Интеграции с базой данных
- ✅ Обработки HTTP-запросов

### 6.5. Запуск тестов

```bash
mvn test
```

---

## 7. БЕЗОПАСНОСТЬ

### 7.1. Многоуровневая система безопасности

#### 7.1.1. Уровень 1: Фильтры

**AuthenticationFilter:**

- Проверяет аутентификацию для всех запросов
- Перенаправляет неавторизованных пользователей на страницу входа
- Проверяет права доступа к административным функциям

**CharacterEncodingFilter:**

- Устанавливает кодировку UTF-8 для всех запросов
- Предотвращает проблемы с кодировкой кириллицы

#### 7.1.2. Уровень 2: Контроллеры

Каждый сервлет проверяет права перед выполнением операций:

```java
case "edit":
    if (!isAdmin(request)) {
        response.sendError(HttpServletResponse.SC_FORBIDDEN, 
            "Доступ запрещен. Требуются права администратора.");
        return;
    }
    showEditForm(request, response);
    break;
```

#### 7.1.3. Уровень 3: Представление

JSP страницы скрывают недоступные функции:

```jsp
<c:if test="${sessionScope.userRole == 'ADMIN'}">
    <a href="books?action=new" class="btn btn-primary">
        + Добавить книгу
    </a>
</c:if>
```

### 7.2. Защита паролей

**Хеширование с BCrypt:**

```java
private String hashPassword(String password) {
    return BCrypt.hashpw(password, BCrypt.gensalt(12));
}

private boolean checkPassword(String password, String hashedPassword) {
    return BCrypt.checkpw(password, hashedPassword);
}
```

**Параметры:**

- Алгоритм: BCrypt
- Strength: 12 rounds (высокая надежность)
- Salt: автоматическая генерация

### 7.3. Управление сессиями

```java
HttpSession session = request.getSession(true);
session.setAttribute("currentUser", user);
session.setAttribute("username", user.getUsername());
session.setAttribute("userRole", user.getRole());
session.setMaxInactiveInterval(30 * 60); // 30 минут
```

### 7.4. Защита от SQL-инъекций

Использование Hibernate и Prepared Statements автоматически защищает от SQL-инъекций:

```java
TypedQuery<User> query = em.createQuery(
    "SELECT u FROM User u WHERE u.username = :username", User.class);
query.setParameter("username", username); // Безопасная подстановка
```

---

## 8. ИНСТРУКЦИЯ ПО РАЗВЕРТЫВАНИЮ

### 8.1. Требования к системе

**Программное обеспечение:**

- JDK 17 или выше
- PostgreSQL 12+
- Maven 3.6+
- Операционная система: Windows/Linux/MacOS

**Аппаратное обеспечение:**

- Процессор: 2+ ядра
- Оперативная память: 4+ GB
- Свободное место на диске: 1+ GB

### 8.2. Установка и настройка

#### 8.2.1. Установка PostgreSQL

1. Скачайте PostgreSQL с официального сайта
2. Установите с параметрами по умолчанию
3. Запомните пароль для пользователя postgres

#### 8.2.2. Создание базы данных

Откройте psql и выполните:

```sql
DROP DATABASE IF EXISTS bookstore_utf8;
CREATE DATABASE bookstore_utf8 
    WITH OWNER = postgres 
    ENCODING = 'UTF8' 
    LC_COLLATE = 'C' 
    LC_CTYPE = 'C' 
    TEMPLATE = template0;
```

#### 8.2.3. Инициализация таблиц

```bash
# Windows PowerShell
$env:PGPASSWORD="ваш_пароль"
psql -U postgres -d bookstore_utf8 -f database.sql

# Linux/Mac
export PGPASSWORD="ваш_пароль"
psql -U postgres -d bookstore_utf8 -f database.sql
```

#### 8.2.4. Настройка подключения

Откройте `src/main/resources/META-INF/persistence.xml` и установите:

```xml
<property name="jakarta.persistence.jdbc.url" 
          value="jdbc:postgresql://localhost:5432/bookstore_utf8?useUnicode=true&characterEncoding=UTF-8"/>
<property name="jakarta.persistence.jdbc.user" value="postgres"/>
<property name="jakarta.persistence.jdbc.password" value="ваш_пароль"/>
```

#### 8.2.5. Сборка и запуск

```bash
# Сборка проекта
mvn clean package

# Запуск приложения
mvn jetty:run
```

#### 8.2.6. Первый вход

1. Откройте браузер: http://localhost:8081
2. Войдите как администратор:
   - Логин: `admin`
   - Пароль: `admin123`

### 8.3. Устранение неполадок

**Проблема:** Кириллица отображается некорректно

**Решение:**

1. Убедитесь, что БД создана с кодировкой UTF-8
2. Проверьте настройки в persistence.xml
3. Перезапустите приложение

**Проблема:** Ошибка подключения к БД

**Решение:**

1. Убедитесь, что PostgreSQL запущен
2. Проверьте пароль в persistence.xml
3. Проверьте, что база данных существует

**Проблема:** Порт 8081 занят

**Решение:**

```bash
# Найти процесс
netstat -ano | findstr :8081

# Завершить процесс
taskkill /F /PID <PID>
```

---

## 9. ЗАКЛЮЧЕНИЕ

### 9.1. Результаты выполнения проекта

В рамках курсового проекта была разработана полнофункциональная информационная система "Книжный магазин" на базе платформы Java EE. Система успешно реализует все требования технического задания:

**Выполненные задачи:**

1. ✅ Спроектирована и реализована база данных PostgreSQL с кодировкой UTF-8
2. ✅ Разработана серверная часть на Java EE с архитектурой MVC
3. ✅ Создан современный пользовательский интерфейс на JSP/JSTL
4. ✅ Реализованы CRUD операции для всех сущностей (книги, покупатели, продавцы, заказы)
5. ✅ Внедрена система аутентификации и авторизации с хешированием паролей
6. ✅ Реализовано разграничение прав доступа (ADMIN/USER)
7. ✅ Разработаны модульные и интеграционные тесты
8. ✅ Обеспечена многоуровневая безопасность
9. ✅ Проведена полная документация проекта

### 9.2. Достигнутые результаты

**Функциональные возможности:**

- Полное управление каталогом книг
- Ведение базы покупателей и продавцов
- Обработка заказов с автоматическим расчетом суммы
- Система входа с регистрацией пользователей
- Разграничение прав доступа по ролям

**Технические достижения:**

- Применение современных технологий Java EE
- Использование ORM Hibernate для работы с БД
- Реализация архитектурного паттерна MVC
- Покрытие кода тестами
- Многоуровневая система безопасности

**Качество кода:**

- Соблюдение принципов SOLID
- Использование паттернов проектирования
- Модульная структура приложения
- Читаемый и документированный код

### 9.3. Практическая значимость

Разработанная система может быть использована:

- В реальных книжных магазинах для автоматизации бизнес-процессов
- Как учебный пример для изучения Java EE
- Как база для дальнейшего развития функциональности

### 9.4. Возможности для развития

**Потенциальные улучшения:**

1. Добавление поиска и фильтрации книг по различным критериям
2. Реализация отчетов и аналитики продаж
3. Интеграция с платежными системами
4. Добавление API для мобильных приложений
5. Реализация системы скидок и акций
6. Добавление функции бронирования книг
7. Интеграция с почтовыми сервисами для уведомлений
8. Реализация многоязычности интерфейса

### 9.5. Полученный опыт

В процессе разработки проекта были получены навыки:

- Проектирования и разработки веб-приложений на Java EE
- Работы с ORM Hibernate и JPA
- Проектирования и нормализации баз данных
- Разработки RESTful веб-сервисов (Servlets)
- Реализации систем аутентификации и авторизации
- Написания модульных и интеграционных тестов
- Работы с системой сборки Maven
- Документирования программного обеспечения

Разработанная система демонстрирует практическое применение технологий Java EE для создания корпоративных веб-приложений и может служить основой для дальнейшего развития более сложных информационных систем.

---

## 10. СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ

1. **Oracle Java Documentation**https://docs.oracle.com/en/java/
2. **Jakarta EE Specification**https://jakarta.ee/specifications/
3. **Hibernate ORM Documentation**https://hibernate.org/orm/documentation/
4. **PostgreSQL Documentation**https://www.postgresql.org/docs/
5. **JUnit 5 User Guide**https://junit.org/junit5/docs/current/user-guide/
6. **Maven Getting Started Guide**https://maven.apache.org/guides/getting-started/
7. **BCrypt Documentation**https://www.mindrot.org/projects/jBCrypt/
8. **Java EE Design Patterns**Core J2EE Patterns: Best Practices and Design Strategies
9. **Clean Code: A Handbook of Agile Software Craftsmanship**Robert C. Martin
10. **Effective Java (3rd Edition)**
    Joshua Bloch

---

**Дата разработки:** 30 сентября 2025 г.
**Версия системы:** 1.0
**Статус:** Готово к использованию
